#!/bin/sh
line_counter=0
(
  cat /dev/stdin
) | while read line; do
  let line_counter+=1
  command=$(echo $@ | sd '%\{l\}' "$line" | sd '%\{lc\}' "$line_counter")
  $SHELL -c "$command"
done
exit 0
